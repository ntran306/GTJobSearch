{% extends "base.html" %}
{% load static %}

{% block nav_jobs %}active{% endblock %}

{% block content %}
<div class="page-container">

    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title"><i class="fas fa-tasks"></i> My Applications</h1>
        <p class="page-subtitle">Track your progress for each application</p>
    </div>

    <!-- Applications List -->
    <div class="applications-list">
        {% if applications %}
            {% for app in applications %}
                <div class="application-card">
                    <div class="application-header">
                        <h2 class="job-title">{{ app.job.title }}</h2>
                        <h3 class="company-name">{{ app.job.company }}</h3>
                        <p class="applied-date">
                            <i class="fas fa-calendar-check"></i>
                            Applied on {{ app.created_at|date:"M d, Y" }}
                        </p>
                    </div>

                    <!-- Status Tracker -->
                    <div class="status-tracker">
                        {% for step in "Applied,Review,Interview,Offer,Closed".split(",") %}
                            <div class="status-step {% if app.status == step %}active{% endif %}
                                                  {% if step == 'Closed' and app.status != 'Closed' %}disabled{% endif %}">
                                <span class="step-icon">
                                    {% if step == "Applied" %}<i class="fas fa-paper-plane"></i>{% endif %}
                                    {% if step == "Review" %}<i class="fas fa-search"></i>{% endif %}
                                    {% if step == "Interview" %}<i class="fas fa-comments"></i>{% endif %}
                                    {% if step == "Offer" %}<i class="fas fa-handshake"></i>{% endif %}
                                    {% if step == "Closed" %}<i class="fas fa-times-circle"></i>{% endif %}
                                </span>
                                <span class="step-label">{{ step }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-results">
                <i class="fas fa-folder-open"></i>
                <h3>No Applications Found</h3>
                <p>You havenâ€™t applied to any jobs yet. Go explore job listings!</p>
                <a href="{% url 'jobs:index' %}" class="apply-btn">
                    <i class="fas fa-briefcase"></i> Browse Jobs
                </a>
            </div>
        {% endif %}
    </div>

</div>
{% endblock %}